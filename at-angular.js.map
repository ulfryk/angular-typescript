{"version":3,"sources":["../at-angular.ts"],"names":[],"mappings":"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","file":"at-angular.js","sourcesContent":["\nmodule at {\n\n    'use strict';\n\n    const directiveProperties: string[] = [\n        'compile',\n        'controller',\n        'controllerAs',\n        'bindToController',\n        'link',\n        'priority',\n        'replace',\n        'require',\n        'restrict',\n        'scope',\n        'template',\n        'templateUrl',\n        'terminal',\n        'transclude'\n    ];\n\n    /* tslint:disable:no-any */\n    export interface IClassAnnotationDecorator {\n        (target: any): void;\n        (t: any, key: string, index: number): void;\n    }\n\n    function instantiate(moduleName: string, name: string, mode: string): IClassAnnotationDecorator {\n        return (target: any): void => {\n            angular.module(moduleName)[mode](name, target);\n        };\n    }\n\n    export function attachInjects(target: any, ...args: any[]): any {\n        (target.$inject || []).forEach((item: string, index: number) => {\n            target.prototype[(item.charAt(0) === '$' ? '$' : '$$') + item] = args[index];\n        });\n        return target;\n    }\n\n    export interface IInjectAnnotation {\n        (...args: any[]): IClassAnnotationDecorator;\n    }\n\n    export function inject(...args: string[]): at.IClassAnnotationDecorator {\n        return (target: any, key?: string, index?: number): void => {\n            if (angular.isNumber(index)) {\n                target.$inject = target.$inject || [];\n                target.$inject[index] = args[0];\n            } else {\n                target.$inject = args;\n            }\n        };\n    }\n\n    export interface IServiceAnnotation {\n        (moduleName: string, serviceName: string): IClassAnnotationDecorator;\n    }\n\n    export function service(moduleName: string, serviceName: string): at.IClassAnnotationDecorator {\n        return instantiate(moduleName, serviceName, 'service');\n    }\n\n    export interface IControllerAnnotation {\n        (moduleName: string, ctrlName: string): IClassAnnotationDecorator;\n    }\n\n    export function controller(moduleName: string, ctrlName: string): at.IClassAnnotationDecorator {\n        return instantiate(moduleName, ctrlName, 'controller');\n    }\n\n    export interface IDirectiveAnnotation {\n        (moduleName: string, directiveName: string): IClassAnnotationDecorator;\n    }\n\n    export function directive(moduleName: string, directiveName: string): at.IClassAnnotationDecorator {\n        return (target: any): void => {\n            let config: angular.IDirective;\n            const ctrlName: string = angular.isString(target.controller) ? target.controller.split(' ').shift() : null;\n            /* istanbul ignore else */\n            if (ctrlName) {\n                controller(moduleName, ctrlName)(target);\n            }\n            config = directiveProperties.reduce((\n                config: angular.IDirective,\n                property: string\n            ) => {\n                return angular.isDefined(target[property]) ? angular.extend(config, {[property]: target[property]}) :\n                    config; /* istanbul ignore next */\n            }, {controller: target, scope: Boolean(target.templateUrl)});\n\n            angular.module(moduleName).directive(directiveName, () => (config));\n        };\n    }\n\n    export interface IClassFactoryAnnotation {\n        (moduleName: string, className: string): IClassAnnotationDecorator;\n    }\n\n    export function classFactory(moduleName: string, className: string): at.IClassAnnotationDecorator {\n        return (target: any): void => {\n            function factory(...args: any[]): any {\n                return at.attachInjects(target, ...args);\n            }\n            /* istanbul ignore else */\n            if (target.$inject && target.$inject.length > 0) {\n                factory.$inject = target.$inject.slice(0);\n            }\n            angular.module(moduleName).factory(className, factory);\n        };\n    }\n    /* tslint:enable:no-any */\n\n}\n"],"sourceRoot":" "}